<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Power Graph</title>
  <link rel="icon" href="favicon.png" type="image/x-icon">
</head>
<body style="background:#000; color:#0ff; font-family: monospace; text-align:center;">
  <h2>âš¡ Power Usage Over Time</h2>
  <canvas id="graph" width="600" height="300" style="background:#111; border:1px solid #0ff;"></canvas>

  <script>
    const canvas = document.getElementById("graph");
    const ctx = canvas.getContext("2d");
    const logs = JSON.parse(localStorage.getItem("sinkOSLogs")) || [];

    const points = logs.map((log, i) => {
      const match = log.summary.match(/POWER: ([\d.]+) W/);
      return match ? parseFloat(match[1]) : null;
    }).filter(p => p !== null);

    const max = Math.max(...points, 10);
    const spacing = canvas.width / (points.length - 1 || 1);

    ctx.beginPath();
    ctx.moveTo(0, canvas.height);
    points.forEach((val, i) => {
      const x = i * spacing;
      const y = canvas.height - (val / max) * canvas.height;
      ctx.lineTo(x, y);
    });
    ctx.strokeStyle = "#00ffff";
    ctx.lineWidth = 2;
    ctx.stroke();
  </script>
</body>
</html>